<mat-stepper #stepper *transloco="let t; prefix: 'feed'" linear=true>
  <mat-step [stepControl]="firstFormGroup">

    <!--      FINDABILITY-->

    <mat-expansion-panel [expanded]="true" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ t('findability_title') }}</mat-panel-title>
        <mat-panel-description>
          {{ t('findability_description') }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-grid-list *ngFor="let fairPrinciple of this.cardsInfoFindable; let i = index" cols="3" rowHeight="350px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <app-feed-select-principles
            (click)="this.handleChangedSelection(fairPrinciple)"
            [description]="this.fairPrincipleList[fairPrinciple].description"
            [difficulty]="this.fairPrincipleList[fairPrinciple].difficulty"
            [isSelected]="this.selectedPrinciples.includes(fairPrinciple)"
            [title]="this.fairPrincipleList[fairPrinciple].name"
          ></app-feed-select-principles>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-expansion-panel>

    <!--      ACCESSIBILITY-->

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ t('accessibility_title') }}</mat-panel-title>
        <mat-panel-description> {{ t('accessibility_description') }}</mat-panel-description>
      </mat-expansion-panel-header>
      <mat-grid-list *ngFor="let fairPrinciple of this.cardsInfoAccessible; let i = index" cols="3" rowHeight="350px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <app-feed-select-principles
            (click)="this.handleChangedSelection(fairPrinciple)"
            [description]="this.fairPrincipleList[fairPrinciple].description"
            [difficulty]="this.fairPrincipleList[fairPrinciple].difficulty"
            [isSelected]="this.selectedPrinciples.includes(fairPrinciple)"
            [title]="this.fairPrincipleList[fairPrinciple].name"
          ></app-feed-select-principles>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-expansion-panel>

    <!--      INTEROPERABILITY-->

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ t('interoperability_title') }}</mat-panel-title>
        <mat-panel-description>
          {{ t('interoperability_description') }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-grid-list *ngFor="let fairPrinciple of this.cardsInfoInteroperable; let i = index" cols="3"
                     rowHeight="350px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <app-feed-select-principles
            (click)="this.handleChangedSelection(fairPrinciple)"
            [description]="this.fairPrincipleList[fairPrinciple].description"
            [difficulty]="this.fairPrincipleList[fairPrinciple].difficulty"
            [isSelected]="this.selectedPrinciples.includes(fairPrinciple)"
            [title]="this.fairPrincipleList[fairPrinciple].name"
          ></app-feed-select-principles>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-expansion-panel>

    <!--      REUSABILITY-->

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ t('reusability_title') }}</mat-panel-title>
        <mat-panel-description>
          {{ t('reusability_description') }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-grid-list *ngFor="let fairPrinciple of this.cardsInfoReusable; let i = index" cols="3" rowHeight="350px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <app-feed-select-principles
            (click)="this.handleChangedSelection(fairPrinciple)"
            [description]="this.fairPrincipleList[fairPrinciple].description"
            [difficulty]="this.fairPrincipleList[fairPrinciple].difficulty"
            [isSelected]="this.selectedPrinciples.includes(fairPrinciple)"
            [title]="this.fairPrincipleList[fairPrinciple].name"
          ></app-feed-select-principles>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-expansion-panel>
    <div *transloco="let t; prefix: 'common'">
      <button *ngIf="this.firstFormGroup.valid"
              mat-button
              matStepperNext
              type="button">{{ t('next') }}
      </button>
    </div>
    </mat-step>

  <mat-step [stepControl]="firstFormGroup" label="{{ t('confirm_selected_indicators_label') }}">
    <div>
      {{ t('confirm_selected_indicators_description') }}
    </div>
    <mat-grid-list *ngFor="let fairPrinciple of this.selectedPrinciples; let i = index" cols="3" rowHeight="350px">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <app-feed-select-principles
          (click)="this.handleChangedSelectionAfterConfirm(fairPrinciple)"
          [description]="this.fairPrincipleList[fairPrinciple].description"
          [difficulty]="this.fairPrincipleList[fairPrinciple].difficulty"
          [isSelected]="this.selectedPrinciples.includes(fairPrinciple)"
          [title]="this.fairPrincipleList[fairPrinciple].name"
        ></app-feed-select-principles>
      </mat-grid-tile>
    </mat-grid-list>
    <div *transloco="let t; prefix: 'common'">
      <button
        mat-button
        matStepperPrevious
        type="button">{{ t('back') }}
      </button>
      <button (click)="this.handleApplyPrinciples()"
              *ngIf="this.firstFormGroup.valid"
              mat-button type="button">{{ t('next') }}
      </button>
    </div>
    </mat-step>
  <mat-step>
    <ng-template matStepLabel>{{ t('common.done') }}</ng-template>
    <p>{{ t('done_message') }}</p>

    <div>
      <button (click)="this.handleGoToInstancePage()" mat-button>{{ t('go_to_instance_page_button') }}</button>
        </div>
    </mat-step>
</mat-stepper>
